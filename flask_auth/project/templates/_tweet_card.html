<div class="tweet-card">

    <!-- Header -->
    <div class="tweet-header">
        <div class="tweet-author">
            <strong>@{{ tweet.user.name }}</strong>
            <span class="tweet-date">{{ tweet.timestamp.strftime('%d/%m/%Y %H:%M') }}</span>
        </div>

        {% if show_delete %}
        <form action="{{ url_for('main.delete_tweet', tweet_id=tweet.id) }}" method="POST" class="delete-form">
            <button type="submit" class="delete-btn">
                <i class="fas fa-trash"></i>
            </button>
        </form>
        {% endif %}
    </div>

    <!-- Content -->
    <div class="tweet-content">
        {% for word in tweet.content.split() %}
            {% if word.startswith('#') %}
                <a href="{{ url_for('main.hashtag', tag=word[1:]) }}" class="hashtag">{{ word }}</a>
            {% else %}
                {{ word }}
            {% endif %}
            &nbsp;
        {% endfor %}
    </div>

    <!-- Actions -->
    <div class="tweet-actions">
        <!-- Like -->
        <form action="{{ url_for('main.like_tweet', tweet_id=tweet.id) }}" method="POST">
            <button type="submit" class="like-btn {% if tweet.id in current_user.liked_tweet_ids %}liked{% endif %}">
                <i class="fas fa-heart"></i> {{ tweet.likes_count }}
            </button>
        </form>
    </div>

    <!-- Comment Form -->
    <form action="{{ url_for('main.comment_tweet', tweet_id=tweet.id) }}" method="POST" class="comment-section">
        <input type="text" name="comment_content" placeholder="Add a comment..." class="comment-input">
        <button type="submit" class="comment-btn">
            <i class="fas fa-reply"></i>
        </button>
    </form>

    <!-- Comments -->
    {% if tweet.comments %}
    <div class="comments-block">
        {% for comment in tweet.comments %}
        <div class="comment-item">
            <strong>{{ comment.user.name }}</strong>
            <span class="comment-text">
                {% for word in comment.content.split() %}
                    {% if word.startswith('#') %}
                        <a href="{{ url_for('main.hashtag', tag=word[1:]) }}" class="hashtag">{{ word }}</a>
                    {% else %}
                        {{ word }}
                    {% endif %}
                    &nbsp;
                {% endfor %}
            </span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
