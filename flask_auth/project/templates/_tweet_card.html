<div class="tweet-card">
    <!-- Header -->
    <div class="tweet-header" style="display:flex; justify-content:space-between; align-items:center;">
        <div>
            <strong>@{{ tweet.user.name }}</strong>
            <small style="color:#888; margin-left:0.5rem;">{{ tweet.timestamp.strftime('%d/%m/%Y %H:%M') }}</small>
        </div>

        {% if show_delete %}
        <form action="{{ url_for('main.delete_tweet', tweet_id=tweet.id) }}" method="POST" style="margin:0;">
            <button type="submit" class="delete-btn">
            <i class="fas fa-trash"></i>
</button>

        </form>
        {% endif %}
    </div>

    <!-- Contenu avec hashtags cliquables -->
    <div class="tweet-content" style="margin-top:0.5rem;">
        {% for word in tweet.content.split() %}
            {% if word.startswith('#') %}
                <a href="{{ url_for('main.hashtag', tag=word[1:]) }}" class="hashtag">{{ word }}</a>
            {% else %}
                {{ word }}
            {% endif %}
            &nbsp;
        {% endfor %}
    </div>

    <!-- Actions (like/comment) -->
    <div class="tweet-actions">
        {% set liked = tweet.id in current_user.liked_tweet_ids %}
        <form action="{{ url_for('main.like_tweet', tweet_id=tweet.id) }}" method="POST">
            <button type="submit" class="like-btn {% if liked %}liked{% endif %}">
                ❤️ ({{ tweet.likes_count }})
            </button>
        </form>
    </div>

    <!-- Comment Form -->
<!-- Comment Form -->
    <form action="{{ url_for('main.comment_tweet', tweet_id=tweet.id) }}" method="POST" class="comment-section">
        <input type="text" name="comment_content" placeholder="Add a comment..." class="comment-input">
        <button type="submit" class="comment-btn">
            <i class="fas fa-reply"></i>
        </button>
    </form>


    <!-- Liste des commentaires -->
    {% if tweet.comments %}
    <div class="comments-block">
        {% for comment in tweet.comments %}
        <div class="comment-item">
            <strong>{{ comment.user.name }}</strong>:
            {% for word in comment.content.split() %}
                {% if word.startswith('#') %}
                    <a href="{{ url_for('main.hashtag', tag=word[1:]) }}" class="hashtag">{{ word }}</a>
                {% else %}
                    {{ word }}
                {% endif %}
                &nbsp;
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
